ftse_healthcare <- ftse_healthcare[-1, c(1, 7)]
head(ftse_healthcare)
ftse_healthcare <- read.csv("FTSEurofirst Euro Health Care Historical Data.csv", header = F, sep = ",")
ftse_healthcare <- ftse_healthcare[-1, c(1, 7)]
colnames(ftse_healthcare) <- c("Date", "ftse_healthcare_variation")
ftse_healthcare$ftse_healthcare_variation <- as.character(ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$ftse_healthcare_variation <- substr(ftse_healthcare$ftse_healthcare_variation, 1, nchar(ftse_healthcare$ftse_healthcare_variation)-1)
ftse_healthcare$ftse_healthcare_variation <- gsub(",", ".", ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$ftse_healthcare_variation <- as.numeric(ftse_healthcare$ftse_healthcare_variation)
head(ftse_healthcare)
ftse_healthcare$Date <- paste(ftse_healthcare$Date, "01")
ftse_healthcare$Date <- as.Date(ftse_healthcare$Date, format="%b %y %d")
ftse_healthcare$Date <- substr(ftse_healthcare$Date, 1,7)
Data <- left_join(Data, ftse_healthcare, by = c("Date"="Date"))
getwd()
table1 <- read.csv("Europe_5_Factors.csv", header = F)
#table1 <- table1[4:354,]
library(readxl)
library(dplyr)
library(lubridate)
library(tidyverse)
library(hablar)
library(corrplot)
#install.packages("xts")
library(xts)
FF3 <- read.csv("dataFF3.csv", header = FALSE)
colnames(FF3) <- c("Date", "Rates")
colnames(table1) <- c("Date", "Mkt-RF", "SMB", "HML", "RMW", "CMA", "RF" )
## importer les donnés de taux d'interêts de la Banque Centrale Europeen
data1 <- read.csv("data_rates.csv", header = FALSE)
data1 <- data1[-c(1:5), c(1, 9)]
colnames(data1) <- c("Date","Rates_Deposit_Facility_BCE")
#### on recoupere les prémieres 4 chiffres dont correspond à l'année et 5iéme et 6iéme - à mois
year <- substr(table1$Date, 1, 4)
month <- substr(table1$Date, 5,6)
#### on garde ne que année et mois pour le table FF3
FF3$Date <- substr(FF3$Date, 1,7)
FF3 <- FF3[-c(3,4,5)]
## on crée les collones "year" et "month" et "date_nouveau"(dont sera le merge de deux collones "year", "month") dans le tableau table1
table1$year <- year
table1$month <- month
table1$date_nouveau<- paste(table1$year,table1$month,sep = "-")
## on enleve les colones inutiles
table1$Date<- NULL
table1$year <-NULL
table1$month <- NULL
## on renome la dernière colone de table1 pour avoir le méme nom avec le df FF3
colnames(table1) <- c("Mkt-RF", "SMB", "HML", "RMW", "CMA", "RF","Date")
### on fait un leftjoin des dfs FF3 et table1 en gardent touts les observations dans le tableau FF3
#Data=merge(x = FF3, y = table1, by = "Date", all.x = TRUE)
FF3 <- get(load("FF3.rdata"))
head(FF3)
Data <- left_join(FF3, table1, by = c("Date"="Date"))
Data$HML=as.numeric(as.character(Data$HML))
Data$SMB=as.numeric(as.character(Data$SMB))
Data$`Mkt-RF`=as.numeric(as.character(Data$`Mkt-RF`))
Data$RF=as.numeric(as.character(Data$RF))
pca <- prcomp(Data[,c("Mkt-RF", "SMB", "HML", "RF", "Rates")], center = TRUE, scale. = TRUE)
summary(Data)
#### transformer notre tableau Data dans un dataframe
Data <- as.data.frame(Data)
## Création de notre variable target à partir de nos données rates et rf
Data <- Data %>% mutate(target = as.double(Data$Rates) - as.double(as.character(Data$RF)))
### model linéer pour vérifier la significance des variables
linear_model <- lm(formula = target ~ `Mkt-RF`+SMB+HML,data = Data)
summary(linear_model)
#### Rates ECB
data1$Date <- as.Date(data1$Date, format = "%Y-%m-%d")
data1$Rates_Deposit_Facility_BCE <- as.numeric(as.character(data1$Rates_Deposit_Facility_BCE))
data1 <- data1 %>% group_by(Date=floor_date(Date, "month")) %>%
summarize(Rates_Deposit_Facility_BCE=mean(Rates_Deposit_Facility_BCE))
data1 <- data1 %>% drop_na(Rates_Deposit_Facility_BCE)
data1$Date <- substr(data1$Date, 1,7)
Data <- left_join(Data, data1, by = c("Date"="Date"))
#### Exchange rates USD to Euros
data_euro_dollar <- read.csv("eurofxref-hist.csv")
data_euro_dollar <- data_euro_dollar[,1:2]
data_euro_dollar$Date <- as.Date(data_euro_dollar$Date, format = "%Y-%m-%d")
data_euro_dollar <- data_euro_dollar %>% group_by(Date=floor_date(Date, "month")) %>%
summarize(USD=mean(USD))
data_euro_dollar <- data_euro_dollar %>% drop_na(USD)
data_euro_dollar$Date <- substr(data_euro_dollar$Date, 1,7)
Data <- left_join(Data, data_euro_dollar, by = c("Date"="Date"))
### MCOIL eu
mcoilbrenteu <- read.csv("MCOILBRENTEU.csv")
mcoilbrenteu$Date <- as.Date(mcoilbrenteu$DATE, format = "%Y-%m-%d")
mcoilbrenteu$Date <- substr(mcoilbrenteu$Date, 1,7)
Data <- left_join(Data, mcoilbrenteu[-c(1)], by = c("Date"="Date"))
### Natural gas price
natgasprice <- read.csv("natural_gas_prices.csv")
colnames(natgasprice) <- c("Date", "Natural gas price")
Data <- left_join(Data, natgasprice, by = c("Date"="Date"))
### Taux d'interet credit
data3 <- read.csv("data_credit.csv")
data3$Date <- paste(data3$Date, "01")
data3$Date <- as.Date(data3$Date, format = "%Y%b%d")
data3$Date <- substr(data3$Date, 1,7)
colnames(data3) <- c("Date", "Credit_rates")
Data <- left_join(Data, data3, by = c("Date"="Date"))
### Debt securities
debt_securities <- read.csv("debt_securities.csv", header = FALSE)
debt_securities <- debt_securities[-c(1:5), c(1,4)]
colnames(debt_securities) <- c("Date", "Debt_securities")
debt_securities$Date <- paste(debt_securities$Date, "01")
debt_securities$Date <- as.Date(debt_securities$Date, format = "%Y%b%d")
debt_securities$Date <- substr(debt_securities$Date, 1,7)
Data <- left_join(Data, debt_securities, by = c("Date"="Date"))
Data$Debt_securities=as.numeric(as.character(Data$Debt_securities))
# Cafe
coffee_prices <- read.csv("coffee-prices-historical-chart-data.csv", header = F, sep=",")
colnames(coffee_prices) <- c("Date", "Coffee_price")
coffee_prices <- coffee_prices[-1,]
coffee_prices$Date <- as.Date(coffee_prices$Date, format="%Y-%m-%d")
coffee_prices$Coffee_price <- as.numeric(as.character(coffee_prices$Coffee_price))
coffee_prices <- coffee_prices %>% group_by(Date=floor_date(Date, "month")) %>%
summarize(Coffee_price=mean(Coffee_price))
coffee_prices <- coffee_prices %>% drop_na(Coffee_price)
coffee_prices$Date <- substr(coffee_prices$Date, 1,7)
Data <- left_join(Data, coffee_prices, by = c("Date"="Date"))
## Sugar Price
sugar_prices <- read.csv("sugar-240.csv", header = F, sep=";")
sugar_prices <- sugar_prices[4:242,1:2]
colnames(sugar_prices) <- c("Date", "Sugar_price")
sugar_prices$Sugar_price <- as.numeric(as.character(sugar_prices$Sugar_price))
sugar_prices$Date <- paste(sugar_prices$Date, "-01", sep="")
sugar_prices$Date <- as.Date(sugar_prices$Date, format="%b-%y-%d")
sugar_prices$Date <- substr(sugar_prices$Date, 1,7)
Data <- left_join(Data, sugar_prices, by = c("Date"="Date"))
## MSCI Europe
msci_europe <- read.csv("MSCI.csv", header = F, sep = ",")
msci_europe <- msci_europe[-1, c(1, 7)]
colnames(msci_europe) <- c("Date", "MSCI_Variation")
msci_europe$MSCI_Variation <- as.character(msci_europe$MSCI_Variation)
msci_europe$MSCI_Variation <- substr(msci_europe$MSCI_Variation, 1, nchar(msci_europe$MSCI_Variation)-1)
msci_europe$MSCI_Variation <- gsub(",", ".", msci_europe$MSCI_Variation)
msci_europe$MSCI_Variation <- as.numeric(msci_europe$MSCI_Variation)
msci_europe$Date <- paste(msci_europe$Date, "01")
msci_europe$Date <- as.Date(msci_europe$Date, format="%b %y %d")
msci_europe$Date <- substr(msci_europe$Date, 1,7)
Data <- left_join(Data, msci_europe, by = c("Date"="Date"))
## Euro Stoxx 50
euro_stoxx50 <- read.csv("Euro Stoxx 50.csv", header = F, sep = ",")
euro_stoxx50 <- euro_stoxx50[-1, c(1, 7)]
colnames(euro_stoxx50) <- c("Date", "EuroStoxx_Variation")
euro_stoxx50$EuroStoxx_Variation <- as.character(euro_stoxx50$EuroStoxx_Variation)
euro_stoxx50$EuroStoxx_Variation <- substr(euro_stoxx50$EuroStoxx_Variation, 1, nchar(euro_stoxx50$EuroStoxx_Variation)-1)
euro_stoxx50$EuroStoxx_Variation <- gsub(",", ".", euro_stoxx50$EuroStoxx_Variation)
euro_stoxx50$EuroStoxx_Variation <- as.numeric(euro_stoxx50$EuroStoxx_Variation)
euro_stoxx50$Date <- paste(euro_stoxx50$Date, "01")
euro_stoxx50$Date <- as.Date(euro_stoxx50$Date, format="%b %y %d")
euro_stoxx50$Date <- substr(euro_stoxx50$Date, 1,7)
Data <- left_join(Data, euro_stoxx50, by = c("Date"="Date"))
# FTSE_Healthcare
ftse_healthcare <- read.csv("FTSEurofirst Euro Health Care Historical Data.csv", header = F, sep = ",")
ftse_healthcare <- ftse_healthcare[-1, c(1, 7)]
colnames(ftse_healthcare) <- c("Date", "ftse_healthcare_variation")
ftse_healthcare$ftse_healthcare_variation <- as.character(ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$ftse_healthcare_variation <- substr(ftse_healthcare$ftse_healthcare_variation, 1, nchar(ftse_healthcare$ftse_healthcare_variation)-1)
ftse_healthcare$ftse_healthcare_variation <- gsub(",", ".", ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$ftse_healthcare_variation <- as.numeric(ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$Date <- paste(ftse_healthcare$Date, "01")
ftse_healthcare$Date <- as.Date(ftse_healthcare$Date, format="%b %y %d")
ftse_healthcare$Date <- substr(ftse_healthcare$Date, 1,7)
Data <- left_join(Data, ftse_healthcare, by = c("Date"="Date"))
is.na(Data)
Data <- na.omit(Data)
Data <- na.omit(Data)
is.na(Data)
head(data())
head(Data)
ftse_fin <- read.csv("FTSEurofirst Euro Financial Services Historical Data.csv", header = F, sep = ",")
ftse_fin <- ftse_fin[-1, c(1, 7)]
colnames(ftse_fin) <- c("Date", "ftse_fin")
ftse_fin$ftse_fin <- as.character(ftse_healthcare$ftse_fin)
ftse_fin$ftse_fin <- substr(ftse_healthcare$ftse_fin, 1, nchar(ftse_healthcare$ftse_fin)-1)
ftse_fin$ftse_fin <- gsub(",", ".", ftse_healthcare$ftse_fin)
ftse_fin$ftse_fin <- as.numeric(ftse_healthcare$ftse_fin)
ftse_fin$Date <- paste(ftse_fin$Date, "01")
ftse_fin$Date <- as.Date(ftse_fin$Date, format="%b %y %d")
ftse_fin$Date <- substr(ftse_fin$Date, 1,7)
Data <- left_join(Data, ftse_fin, by = c("Date"="Date"))
ftse_fin <- read.csv("FTSEurofirst Euro Financial Services Historical Data.csv", header = F, sep = ",")
ftse_fin <- ftse_fin[-1, c(1, 7)]
colnames(ftse_fin) <- c("Date", "ftse_fin")
ftse_fin$ftse_fin <- as.character(ftse_healthcare$ftse_fin)
head(ftse)
head(ftse_fin)
ftse_fin <- read.csv("FTSEurofirst Euro Financial Services Historical Data.csv", header = F, sep = ",")
ftse_fin <- ftse_fin[-1, c(1, 7)]
colnames(ftse_fin) <- c("Date", "ftse_fin_variation")
ftse_fin$ftse_fin_variation <- as.character(ftse_fin$ftse_fin_variation)
ftse_fin$ftse_fin_variation <- substr(ftse_fin$ftse_fin_variation, 1, nchar(ftse_fin$ftse_fin_variation)-1)
ftse_fin$ftse_fin_variation <- gsub(",", ".", ftse_fin$ftse_fin_variation)
ftse_fin$ftse_fin_variation <- as.numeric(ftse_fin$ftse_fin_variation)
ftse_fin$Date <- paste(ftse_fin$Date, "01")
ftse_fin$Date <- as.Date(ftse_fin$Date, format="%b %y %d")
ftse_fin$Date <- substr(ftse_fin$Date, 1,7)
Data <- left_join(Data, ftse_fin, by = c("Date"="Date"))
head(data)
head(Data)
getwd()
table1 <- read.csv("Europe_5_Factors.csv", header = F)
#table1 <- table1[4:354,]
library(readxl)
library(dplyr)
library(lubridate)
library(tidyverse)
library(hablar)
library(corrplot)
#install.packages("xts")
library(xts)
FF3 <- read.csv("dataFF3.csv", header = FALSE)
colnames(FF3) <- c("Date", "Rates")
colnames(table1) <- c("Date", "Mkt-RF", "SMB", "HML", "RMW", "CMA", "RF" )
## importer les donnés de taux d'interêts de la Banque Centrale Europeen
data1 <- read.csv("data_rates.csv", header = FALSE)
data1 <- data1[-c(1:5), c(1, 9)]
colnames(data1) <- c("Date","Rates_Deposit_Facility_BCE")
#### on recoupere les prémieres 4 chiffres dont correspond à l'année et 5iéme et 6iéme - à mois
year <- substr(table1$Date, 1, 4)
month <- substr(table1$Date, 5,6)
#### on garde ne que année et mois pour le table FF3
FF3$Date <- substr(FF3$Date, 1,7)
FF3 <- FF3[-c(3,4,5)]
## on crée les collones "year" et "month" et "date_nouveau"(dont sera le merge de deux collones "year", "month") dans le tableau table1
table1$year <- year
table1$month <- month
table1$date_nouveau<- paste(table1$year,table1$month,sep = "-")
## on enleve les colones inutiles
table1$Date<- NULL
table1$year <-NULL
table1$month <- NULL
## on renome la dernière colone de table1 pour avoir le méme nom avec le df FF3
colnames(table1) <- c("Mkt-RF", "SMB", "HML", "RMW", "CMA", "RF","Date")
### on fait un leftjoin des dfs FF3 et table1 en gardent touts les observations dans le tableau FF3
#Data=merge(x = FF3, y = table1, by = "Date", all.x = TRUE)
FF3 <- get(load("FF3.rdata"))
head(FF3)
Data <- left_join(FF3, table1, by = c("Date"="Date"))
Data$HML=as.numeric(as.character(Data$HML))
Data$SMB=as.numeric(as.character(Data$SMB))
Data$`Mkt-RF`=as.numeric(as.character(Data$`Mkt-RF`))
Data$RF=as.numeric(as.character(Data$RF))
pca <- prcomp(Data[,c("Mkt-RF", "SMB", "HML", "RF", "Rates")], center = TRUE, scale. = TRUE)
summary(Data)
#### transformer notre tableau Data dans un dataframe
Data <- as.data.frame(Data)
## Création de notre variable target à partir de nos données rates et rf
Data <- Data %>% mutate(target = as.double(Data$Rates) - as.double(as.character(Data$RF)))
### model linéer pour vérifier la significance des variables
linear_model <- lm(formula = target ~ `Mkt-RF`+SMB+HML,data = Data)
summary(linear_model)
#### Rates ECB
data1$Date <- as.Date(data1$Date, format = "%Y-%m-%d")
data1$Rates_Deposit_Facility_BCE <- as.numeric(as.character(data1$Rates_Deposit_Facility_BCE))
data1 <- data1 %>% group_by(Date=floor_date(Date, "month")) %>%
summarize(Rates_Deposit_Facility_BCE=mean(Rates_Deposit_Facility_BCE))
data1 <- data1 %>% drop_na(Rates_Deposit_Facility_BCE)
data1$Date <- substr(data1$Date, 1,7)
Data <- left_join(Data, data1, by = c("Date"="Date"))
#### Exchange rates USD to Euros
data_euro_dollar <- read.csv("eurofxref-hist.csv")
data_euro_dollar <- data_euro_dollar[,1:2]
data_euro_dollar$Date <- as.Date(data_euro_dollar$Date, format = "%Y-%m-%d")
data_euro_dollar <- data_euro_dollar %>% group_by(Date=floor_date(Date, "month")) %>%
summarize(USD=mean(USD))
data_euro_dollar <- data_euro_dollar %>% drop_na(USD)
data_euro_dollar$Date <- substr(data_euro_dollar$Date, 1,7)
Data <- left_join(Data, data_euro_dollar, by = c("Date"="Date"))
### MCOIL eu
mcoilbrenteu <- read.csv("MCOILBRENTEU.csv")
mcoilbrenteu$Date <- as.Date(mcoilbrenteu$DATE, format = "%Y-%m-%d")
mcoilbrenteu$Date <- substr(mcoilbrenteu$Date, 1,7)
Data <- left_join(Data, mcoilbrenteu[-c(1)], by = c("Date"="Date"))
### Natural gas price
natgasprice <- read.csv("natural_gas_prices.csv")
colnames(natgasprice) <- c("Date", "Natural gas price")
Data <- left_join(Data, natgasprice, by = c("Date"="Date"))
### Taux d'interet credit
data3 <- read.csv("data_credit.csv")
data3$Date <- paste(data3$Date, "01")
data3$Date <- as.Date(data3$Date, format = "%Y%b%d")
data3$Date <- substr(data3$Date, 1,7)
colnames(data3) <- c("Date", "Credit_rates")
Data <- left_join(Data, data3, by = c("Date"="Date"))
### Debt securities
debt_securities <- read.csv("debt_securities.csv", header = FALSE)
debt_securities <- debt_securities[-c(1:5), c(1,4)]
colnames(debt_securities) <- c("Date", "Debt_securities")
debt_securities$Date <- paste(debt_securities$Date, "01")
debt_securities$Date <- as.Date(debt_securities$Date, format = "%Y%b%d")
debt_securities$Date <- substr(debt_securities$Date, 1,7)
Data <- left_join(Data, debt_securities, by = c("Date"="Date"))
Data$Debt_securities=as.numeric(as.character(Data$Debt_securities))
# Cafe
coffee_prices <- read.csv("coffee-prices-historical-chart-data.csv", header = F, sep=",")
colnames(coffee_prices) <- c("Date", "Coffee_price")
coffee_prices <- coffee_prices[-1,]
coffee_prices$Date <- as.Date(coffee_prices$Date, format="%Y-%m-%d")
coffee_prices$Coffee_price <- as.numeric(as.character(coffee_prices$Coffee_price))
coffee_prices <- coffee_prices %>% group_by(Date=floor_date(Date, "month")) %>%
summarize(Coffee_price=mean(Coffee_price))
coffee_prices <- coffee_prices %>% drop_na(Coffee_price)
coffee_prices$Date <- substr(coffee_prices$Date, 1,7)
Data <- left_join(Data, coffee_prices, by = c("Date"="Date"))
## Sugar Price
sugar_prices <- read.csv("sugar-240.csv", header = F, sep=";")
sugar_prices <- sugar_prices[4:242,1:2]
colnames(sugar_prices) <- c("Date", "Sugar_price")
sugar_prices$Sugar_price <- as.numeric(as.character(sugar_prices$Sugar_price))
sugar_prices$Date <- paste(sugar_prices$Date, "-01", sep="")
sugar_prices$Date <- as.Date(sugar_prices$Date, format="%b-%y-%d")
sugar_prices$Date <- substr(sugar_prices$Date, 1,7)
Data <- left_join(Data, sugar_prices, by = c("Date"="Date"))
## MSCI Europe
msci_europe <- read.csv("MSCI.csv", header = F, sep = ",")
msci_europe <- msci_europe[-1, c(1, 7)]
colnames(msci_europe) <- c("Date", "MSCI_Variation")
msci_europe$MSCI_Variation <- as.character(msci_europe$MSCI_Variation)
msci_europe$MSCI_Variation <- substr(msci_europe$MSCI_Variation, 1, nchar(msci_europe$MSCI_Variation)-1)
msci_europe$MSCI_Variation <- gsub(",", ".", msci_europe$MSCI_Variation)
msci_europe$MSCI_Variation <- as.numeric(msci_europe$MSCI_Variation)
msci_europe$Date <- paste(msci_europe$Date, "01")
msci_europe$Date <- as.Date(msci_europe$Date, format="%b %y %d")
msci_europe$Date <- substr(msci_europe$Date, 1,7)
Data <- left_join(Data, msci_europe, by = c("Date"="Date"))
## Euro Stoxx 50
euro_stoxx50 <- read.csv("Euro Stoxx 50.csv", header = F, sep = ",")
euro_stoxx50 <- euro_stoxx50[-1, c(1, 7)]
colnames(euro_stoxx50) <- c("Date", "EuroStoxx_Variation")
euro_stoxx50$EuroStoxx_Variation <- as.character(euro_stoxx50$EuroStoxx_Variation)
euro_stoxx50$EuroStoxx_Variation <- substr(euro_stoxx50$EuroStoxx_Variation, 1, nchar(euro_stoxx50$EuroStoxx_Variation)-1)
euro_stoxx50$EuroStoxx_Variation <- gsub(",", ".", euro_stoxx50$EuroStoxx_Variation)
euro_stoxx50$EuroStoxx_Variation <- as.numeric(euro_stoxx50$EuroStoxx_Variation)
euro_stoxx50$Date <- paste(euro_stoxx50$Date, "01")
euro_stoxx50$Date <- as.Date(euro_stoxx50$Date, format="%b %y %d")
euro_stoxx50$Date <- substr(euro_stoxx50$Date, 1,7)
Data <- left_join(Data, euro_stoxx50, by = c("Date"="Date"))
# FTSE_Healthcare
ftse_healthcare <- read.csv("FTSEurofirst Euro Health Care Historical Data.csv", header = F, sep = ",")
ftse_healthcare <- ftse_healthcare[-1, c(1, 7)]
colnames(ftse_healthcare) <- c("Date", "ftse_healthcare_variation")
ftse_healthcare$ftse_healthcare_variation <- as.character(ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$ftse_healthcare_variation <- substr(ftse_healthcare$ftse_healthcare_variation, 1, nchar(ftse_healthcare$ftse_healthcare_variation)-1)
ftse_healthcare$ftse_healthcare_variation <- gsub(",", ".", ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$ftse_healthcare_variation <- as.numeric(ftse_healthcare$ftse_healthcare_variation)
ftse_healthcare$Date <- paste(ftse_healthcare$Date, "01")
ftse_healthcare$Date <- as.Date(ftse_healthcare$Date, format="%b %y %d")
ftse_healthcare$Date <- substr(ftse_healthcare$Date, 1,7)
Data <- left_join(Data, ftse_healthcare, by = c("Date"="Date"))
# FTSE_FinServices
ftse_fin <- read.csv("FTSEurofirst Euro Financial Services Historical Data.csv", header = F, sep = ",")
ftse_fin <- ftse_fin[-1, c(1, 7)]
colnames(ftse_fin) <- c("Date", "ftse_fin_variation")
ftse_fin$ftse_fin_variation <- as.character(ftse_fin$ftse_fin_variation)
ftse_fin$ftse_fin_variation <- substr(ftse_fin$ftse_fin_variation, 1, nchar(ftse_fin$ftse_fin_variation)-1)
ftse_fin$ftse_fin_variation <- gsub(",", ".", ftse_fin$ftse_fin_variation)
ftse_fin$ftse_fin_variation <- as.numeric(ftse_fin$ftse_fin_variation)
ftse_fin$Date <- paste(ftse_fin$Date, "01")
ftse_fin$Date <- as.Date(ftse_fin$Date, format="%b %y %d")
ftse_fin$Date <- substr(ftse_fin$Date, 1,7)
Data <- left_join(Data, ftse_fin, by = c("Date"="Date"))
Data <- na.omit(Data)
ftse_ind <- read.csv("FTSEurofirst Euro Industrial Goods & Services Historical Data.csv", header = F, sep = ",")
ftse_ind <- ftse_ind[-1, c(1, 7)]
colnames(ftse_ind) <- c("Date", "ftse_ind_variation")
ftse_ind$ftse_ind_variation <- as.character(ftse_ind$ftse_ind_variation)
ftse_ind$ftse_ind_variation <- substr(ftse_ind$ftse_ind_variation, 1, nchar(ftse_ind$ftse_ind_variation)-1)
ftse_ind$ftse_ind_variation <- gsub(",", ".", ftse_ind$ftse_ind_variation)
ftse_ind$ftse_ind_variation <- as.numeric(ftse_ind$ftse_ind_variation)
ftse_ind$Date <- paste(ftse_ind$Date, "01")
ftse_ind$Date <- as.Date(ftse_ind$Date, format="%b %y %d")
ftse_ind$Date <- substr(ftse_ind$Date, 1,7)
Data <- left_join(Data, ftse_ind, by = c("Date"="Date"))
Data <- na.omit(Data)
pca=prcomp(Data[,c("target","Mkt-RF", "SMB", "HML", "RMW", "CMA",
"Rates_Deposit_Facility_BCE", "USD", "MCOILBRENTEU", "Natural gas price",
"Debt_securities", "Credit_rates", "Coffee_price", "Sugar_price", "MSCI_Variation",
"EuroStoxx_Variation", "ftse_healthcare_variation", "ftse_fin_variation", "ftse_ind_variation")], center=TRUE, scale. = TRUE)
summary(pca)
library("FactoMineR")
res.pca <- PCA(Data[,c("target","Mkt-RF", "SMB", "HML", "RMW", "CMA","Rates_Deposit_Facility_BCE", "USD", "MCOILBRENTEU", "Natural gas price", "Debt_securities", "Credit_rates", "Coffee_price", "Sugar_price", "MSCI_Variation", "EuroStoxx_Variation")], graph = TRUE)
res.pca <- PCA(Data[,c("target","Mkt-RF", "SMB", "HML", "RMW", "CMA",
"Rates_Deposit_Facility_BCE", "USD", "MCOILBRENTEU",
"Natural gas price", "Debt_securities", "Credit_rates", "Coffee_price", "Sugar_price",
"MSCI_Variation", "EuroStoxx_Variation", "ftse_healthcare_variation", "ftse_fin_variation", "ftse_ind_variation")], graph = TRUE)
print(res.pca)
library("factoextra")
library(ggplot2)
library("corrplot")
eig.val <- get_eigenvalue(res.pca)
eig.val
eig.viz<-fviz_eig(res.pca, addlabels = TRUE, ylim = c(0, 50))
eig.viz
eig.viz
head(var$coord, 10)
fviz_pca_var(res.pca, col.var = "black")
Data <- na.omit(Data)
is.na(Data)
View(Data)
res.pca <- PCA(Data[,c("target","Mkt-RF", "SMB", "HML", "RMW", "CMA",
"Rates_Deposit_Facility_BCE", "USD", "MCOILBRENTEU",
"Natural gas price", "Debt_securities", "Credit_rates", "Coffee_price", "Sugar_price",
"MSCI_Variation", "EuroStoxx_Variation", "ftse_healthcare_variation", "ftse_fin_variation", "ftse_ind_variation")], graph = TRUE)
library("factoextra")
library(ggplot2)
library("corrplot")
eig.val <- get_eigenvalue(res.pca)
eig.val
eig.viz<-fviz_eig(res.pca, addlabels = TRUE, ylim = c(0, 50))
eig.viz
var <- get_pca_var(res.pca)
head(var$contrib)
## Cercle de corrélation
# Coordonnées des variables
head(var$coord, 10)
fviz_pca_var(res.pca, col.var = "black")
head(var$coord, 10)
fviz_cos2(res.pca, choice = "var", axes = 1:3)
fviz_contrib(res.pca, choice = "var", axes = 1, top = 10)
fviz_contrib(res.pca, choice = "var", axes = 1:2, top = 10)
linear_model <- lm(formula = target ~ `Mkt-RF`+EuroStoxx_Variation+MSCI_Variation+ftse_ind_variation+ftse_fin_variation+ftse_healthcare_variation,data = Data)
summary(linear_model)
data_mat <- as.matrix(Data)
M <- cor(data_mat)
data_mat <- as.matrix(Data[,-1])
View(data_mat)
View(data_mat)
M <- cor(data_mat)
data_mat <- as.matrix(Data[,-1])
M <- cor(data_mat)
corrplot(M, method = "circle")
data_mat <- as.matrix(Data[,-1-2]
View(Data)
View(Data)
View(data_mat)
View(data_mat)
View(M)
linear_model <- lm(formula = target ~ `Mkt-RF`+EuroStoxx_Variation+MSCI_Variation+ftse_ind_variation+ftse_fin_variation,data = Data)
summary(linear_model)
linear_model <- lm(formula = target ~ `Mkt-RF`+EuroStoxx_Variation+MSCI_Variation+ftse_ind_variation+ftse_fin_variation+ftse_healthcare_variation,data = Data)
summary(linear_model)
nestle <- read.csv("Nestle.csv", header = F, sep = ",")
View(nestle)
View(nestle)
nestle <- read.csv("Nestle.csv", header = F, sep = ",")
nestle <- nestle[-1, c(1, 7)]
colnames(nestle) <- c("Date", "Nestle_share_price_variation")
nestle$Nestle_share_price_variation <- as.character(nestle$Nestle_share_price_variation)
nestle$Nestle_share_price_variation <- substr(nestle$Nestle_share_price_variation, 1, nchar(nestle$Nestle_share_price_variation)-1)
nestle$Nestle_share_price_variation <- gsub(",", ".", nestle$Nestle_share_price_variation)
nestle$Nestle_share_price_variation <- as.numeric(nestle$Nestle_share_price_variation)
nestle$Date <- paste(nestle$Date, "01")
nestle$Date <- as.Date(nestle$Date, format="%b %y %d")
nestle$Date <- substr(nestle$Date, 1,7)
Data <- left_join(Data, nestle, by = c("Date"="Date"))
Data <- na.omit(Data)
data_mat <- as.matrix(Data[,-1-2])
M <- cor(data_mat)
data_mat <- as.matrix(Data[,-1])
M <- cor(data_mat)
View(M)
View(M)
library("FactoMineR")
res.pca <- PCA(Data[,c("target","Mkt-RF", "SMB", "HML", "RMW", "CMA",
"Rates_Deposit_Facility_BCE", "USD", "MCOILBRENTEU",
"Natural gas price", "Debt_securities", "Credit_rates", "Coffee_price", "Sugar_price",
"MSCI_Variation", "EuroStoxx_Variation", "ftse_healthcare_variation", "ftse_fin_variation", "ftse_ind_variation",
"Nestle_share_price_variation")], graph = TRUE)
library("factoextra")
library(ggplot2)
library("corrplot")
eig.val <- get_eigenvalue(res.pca)
eig.val
eig.viz<-fviz_eig(res.pca, addlabels = TRUE, ylim = c(0, 50))
eig.viz
fviz_contrib(res.pca, choice = "var", axes = 1, top = 10)
arget ~ `Mkt-RF`+EuroStoxx_Variation+MSCI_Variation+ftse_ind_variation+ftse_fin_variation+ftse_healthcare_variation,data = Data)
summary(linear_model)
res <- residuals(linear_model)
linear_model <- lm(formula = target ~ `Mkt-RF`+EuroStoxx_Variation+MSCI_Variation+ftse_ind_variation+ftse_fin_variation+ftse_healthcare_variation,data = Data)
summary(linear_model)
res <- residuals(linear_model)
res <- residuals(linear_model)
par(mfrow=c(1,2))
hist(residuals(linear_model))
qqnorm(res)
qqline(res, col = 2)
mean(res**2)
View(Data)
View(Data)
cols(Data[,-1-2-8])
colnames(Data[,-1-2-8])
Data1 <- Data[,-1-2-8]
View(Data1)
View(Data1)
View(Data1)
View(Data1)
Data[,!c("Date", "Rates", "RF")
;
Data[,!c("Date", "Rates", "RF")]
select(Data, -c(1,2, 8))
colnames(select(Data, -c(1,2, 8)))
lmMod <- lm(formula = target ~ ., select(Data, -c(1,2, 8))])
lmMod <- lm(formula = target ~ ., select(Data, -c(1,2, 8)))
lmMod <- lm(formula = target ~ ., select(Data, -c(1,2, 8)))
selectedMod <- step(lmMod)
summary(selectedMod)
regMod <- RegBest(y=target, x = select(Data, -c(-1,2, 8)))
regMod <- RegBest(y=Data$target, x = select(Data, -c(-1,2, 8)))
df <- select(Data, -c(-1,2, 8))
regMod <- RegBest(y=df$target, x = df)
